(function(){var e,t,n,r,i,s;s=Bobcat.TH.isSmallScreen(),t=Bobcat.TH.isIpad(),n=!1,e=function(){var e,t,n;e=$(".bg-image-editor").first();if(e.length){n=e.offset().top,t=$("#header-container");if(n<100&&t.is(":visible")&&t.outerHeight(!0)>10)return e.css({top:t.outerHeight(!0)+10})}},r=function(){var n,r,i,o,u,a;s=Bobcat.TH.isSmallScreen(),a=$("li.slide").first().find(".spacer"),r=$("#header-container"),r.is(":visible")?(a.length===0&&(a=$('<div class="spacer"></div>').prependTo($("li.slide .container").first())),o=r.height()-20,a.css({height:o})):$(".spacer").hide(),u=$(".header .logo img").first().attr("src"),s&&(!u||u.indexOf("assets/icons/transparent.png")>-1)?($(".header .power").hide(),r.css("height",0)):($(".header .power").show(),r.css("height","auto")),e(),n=$(window).height(),i=n<640?640:n,s&&($(".spacer").css("height",0),i=n),$(".resize").each(function(e,t){var n,r;r=$(this),n=r.find(".container").first();if(n.outerHeight(!1)<i)return r.css({"padding-top":Math.floor((i-n.outerHeight(!1))*.5),"padding-bottom":Math.ceil((i-n.outerHeight(!1))*.5)})});if(t)return $("#header-container").addClass("no-flicker")},i=function(){var t,r,i;if(s)return;if(!$("#header-container").is(":visible"))return;if(n)return;t=$("#header-container"),r=$("#header-container .logo").height()+18,i=parseInt(t.css("margin-top"),10);if($(window).scrollTop()>t.height()*.5){if(i===0)return t.stop().animate({"margin-top":-r+"px"},500,"swing",e)}else if(i<-r+1)return t.stop().animate({"margin-top":0},500,"swing",e)},window.runAfterDomBinding.add("fresh",function(){return Bobcat.TH.applyTouchNav(),Bobcat.TH.applyMatchHeights(".small-image"),r(),setTimeout(r,100),setTimeout(r,1500),window.edit_page.Event.subscribe("Slide.afterAdd",function(e,t){return r()}),$(window).resize(r),$("#navbar-top-button img").click(function(){return window.location="#1"}),window.edit_page.Event.subscribe("Menu.beforeChange",function(e,t){return n=!0}),window.edit_page.Event.subscribe("Menu.afterChange",function(e,t){return n=!1,i()}),$(window).scroll(i),$(window).scroll()})}).call(this);